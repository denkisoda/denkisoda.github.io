<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denki-Log</title>
    <meta name="description" content="<%= locals.description %>">

    <!-- Custom styles -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/post.css">
    <link rel="stylesheet" href="assets/css/search.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/pageicon.jpg">

    <!-- Remix icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">

    <!-- Scripts -->
    <script type="text/javascript" defer src="assets/js/main.js"></script>

</head>
<body>
    <div class="page-container">

        <!-- Header -->
        <header class="header" id="header">

            <nav class="navbar container">

                <a href="/">
                    <h2 class="logo">Denki-Log</h2>
                </a>
                <div class="menu" id="menu">
                    <ul class="list">
                        <li class="list-item">
                            <a href="/" class="list-link <%= isActiveRoute('/', currentRoute) %>">Home</a>
                        </li>
                        <li class="list-item">
                            <a href="" class="list-link <%= isActiveRoute('/posts', currentRoute) %>">Posts</a>
                        </li>
                        <li class="list-item">
                            <a href="" class="list-link <%= isActiveRoute('/artworks', currentRoute) %>">Artworks</a>
                        </li>
                        <li class="list-item">
                            <a href="" class="list-link <%= isActiveRoute('/contact', currentRoute) %>">Contact</a>
                        </li>
                        <li class="list-item">
                            <!-- Hide link when on larger screen -->
                            <a href="" class="list-link screen-lg-hidden">About</a> 
                        </li>
                    </ul>
                </div>

                <div class="list list-right">
                    <button class="btn place-items-center" id="theme-toggle-btn">
                        <i class="ri-sun-line sun-icon"></i>
                        <i class="ri-moon-fill moon-icon"></i>
                    </button>

                    <button class="btn place-items-center" id="search-icon-btn">
                        <i class="ri-search-line"></i>
                    </button>

                    <button class="btn place-items-center screen-lg-hidden menu-toggle-icon" id="menu-toggle-btn">
                        <i class="ri-menu-3-line open-menu-icon"></i>
                        <i class="ri-close-line close-menu-icon"></i>
                    </button>

                </div>
            </nav>
        </header>

        <!-- Search -->
        <div class="search-form-container container" id="search-form-container">

            <div class="form-container-inner">
                <form action="/search" method="GET" class="form">
                    <input 
                        type="text" 
                        class="form-input"
                        id="search-input"
                        name="searchTerm" 
                        placeholder="Search Site..."
                    />

                    <button class="btn form-btn" type="summit">
                        <i class="ri-search-line"></i>
                    </button>
            
                    <button class="btn form-close-btn place-items-center" id="search-close-btn">
                        <i class="ri-close-line"></i>
                    </button>

                </form>

            </div>

        </div>

        <!-- Main container: blog posts, profile, tag section -->
        <div class="main-container">

            <!-- Tag list -->
            <div class="tag-list-container">

                <div class="tag-list-title">
                    <p class="section-logo">üîñ</p>
                    <p class="section-title">Tags</p>
                </div>

                <div class="hashtag-container" id="menu">
                    <ul class="hashtag-list">
                        <li class="hashtag-list-item">
                            <a href="" class="hashtag-link text-link">Anime</a>
                        </li>
                        <li class="hashtag-list-item">
                            <a href="" class="hashtag-link text-link">Manga</a>
                        </li>
                    </ul>
                </div>

            </div>

            <!-- Blog posts -->
            <div class="blog-container">

                <p class="section-title">üìÇ Blog Posts</p>

                <div class="blog-card-group">

                    <!-- Fetch blog post data -->
                    <% data.forEach(post => { %>

                        <div class="blog-card">

                            <button class="blog-topic i">Anime</button>

                            <div class="blog-card-banner">
                                <img src="assets/images/test_gelato.jpg" alt="Test Gelato" class="blog-card-img">
                            </div>

                            <div class="blog-card-content">

                                <div class="blog-title text-link">
                                    <a href="/post/<%= post._id %>">
                                            <%= post.title %>
                                        </a>
                                </div>

                                <!-- Show summary of blog, if no summary show top N words -->
                                <p class="blog-text">
                                    <% if (post.desc) { %>
                                        <%= post.desc %>
                                    <% } else { %>
                                        <% const summary = post.body.split(' ').slice(0, 10).join(' ') %>
                                        <%= summary %>...
                                    <% } %>
                                </p>

                                <div class="blog-info">
                                    <p class="blog-info-text">
                                    <time datetime><%= post.createdAt.toDateString() %></time>
                                    <span class="separator"></span>
                                    <i class="ri-time-line clock-icon"></i>
                                    
                                    <!-- Calculate read time  -->
                                    <% const readSpeed = 200 %>
                                    <% const postWordCount = post.body.split(/\s+/).length %>
                                    <% const readTimeMinutes = Math.ceil(postWordCount / readSpeed) %>
                                    <time datetime="PT3M"><%= readTimeMinutes %> min</time>
                                    </p>
                                </div>

                            </div>
                        </div>

                    <% }) %>

                </div>

                <button class="btn load-more">Load More</button>

            </div>

            
            <!-- Side bar -->
            <div class="sidebar-container">

                <div class="profile-container">
                    
                    <div class="profile-title">
                        <p class="section-title">üç∂ About</p>
                    </div>

                    <div class="profile-card">

                        <div class="profile-img-container">
                            <img src="assets/images/profile.png" alt="denkisoda's profile picture" class="profile-img">
                        </div>
                        
                        <div class="profile-text">
                            <h4 class="profile-name">Denki Soda</h4>

                            <p class="profile-intro">
                                I like anime.
                            </p>

                        </div>

                    </div>

                </div>

                <div class="contact-container">

                </div>

            </div>

            <!-- Top top button  -->
            <div id="toTopButton" class="hidden">
                <i class="ri-arrow-up-double-line" onclick="scrollToTop()"></i>
            </div>

        </div>
        
        <!-- footer -->
        <footer class="footer">
            &copy; 
            <span id="current-year">
            </span> 
            , DenkiSoda
        </footer>
    
    
    </div>

</body>
</html>